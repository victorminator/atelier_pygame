
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>C6 - Sprites et groupes - Programmer un jeu Pygame</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../xtra/stylesheets/ajustements.css">
    
      <link rel="stylesheet" href="../xtra/stylesheets/extra-style.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#c6-sprites-et-groupes" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href=".." title="Programmer un jeu Pygame" class="md-header__button md-logo" aria-label="Programmer un jeu Pygame" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m414.8 40.79-128 448.01c-4.9 17-22.6 26.8-39.6 22-17-4.9-26.8-22.6-22-39.6l128-447.99c4.9-16.994 22.6-26.834 39.6-21.978 17 4.855 26.8 22.568 22 39.558zm103.8 80.61 112 112c12.5 12.5 12.5 32.7 0 45.2l-112 112c-12.5 12.5-32.7 12.5-45.2 0s-12.5-32.7 0-45.2l89.3-89.4-89.3-89.4c-12.5-12.5-12.5-32.7 0-45.2s32.7-12.5 45.2 0zm-352 45.2L77.25 256l89.35 89.4c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0L9.372 278.6c-12.496-12.5-12.496-32.7 0-45.2l112.028-112c12.5-12.5 32.7-12.5 45.2 0s12.5 32.7 0 45.2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Programmer un jeu Pygame
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              C6 - Sprites et groupes
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Programmer un jeu Pygame" class="md-nav__button md-logo" aria-label="Programmer un jeu Pygame" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m414.8 40.79-128 448.01c-4.9 17-22.6 26.8-39.6 22-17-4.9-26.8-22.6-22-39.6l128-447.99c4.9-16.994 22.6-26.834 39.6-21.978 17 4.855 26.8 22.568 22 39.558zm103.8 80.61 112 112c12.5 12.5 12.5 32.7 0 45.2l-112 112c-12.5 12.5-32.7 12.5-45.2 0s-12.5-32.7 0-45.2l89.3-89.4-89.3-89.4c-12.5-12.5-12.5-32.7 0-45.2s32.7-12.5 45.2 0zm-352 45.2L77.25 256l89.35 89.4c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0L9.372 278.6c-12.496-12.5-12.496-32.7 0-45.2l112.028-112c12.5-12.5 32.7-12.5 45.2 0s12.5 32.7 0 45.2z"/></svg>

    </a>
    Programmer un jeu Pygame
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Accueil
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C1-Configuration/" class="md-nav__link">
        C1 - Configurer pygame
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C2-Images/" class="md-nav__link">
        C2 - Du contenu pour l'écran
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C2-Python/" class="md-nav__link">
        C2 - Programmer en Python
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C3-Configuration/" class="md-nav__link">
        C3 - Configurer pygame
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C3-Rectangles/" class="md-nav__link">
        C3 - Les rectangles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C4-Images/" class="md-nav__link">
        C4 - Du contenu pour l'écran
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C4-Interactions/" class="md-nav__link">
        C4 - Interactions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C5-Rectangles/" class="md-nav__link">
        C5 - Les rectangles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C5-TextesSons/" class="md-nav__link">
        C5 - Sons et textes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C6-Interactions/" class="md-nav__link">
        C6 - Interactions
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          C6 - Sprites et groupes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        C6 - Sprites et groupes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-rappels-sur-la-poo" class="md-nav__link">
    1 - Rappels sur la POO
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-classe-sprite" class="md-nav__link">
    2 - Classe Sprite
  </a>
  
    <nav class="md-nav" aria-label="2 - Classe Sprite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    Définition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heritage-et-initialisation" class="md-nav__link">
    Héritage et initialisation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-groupes-de-sprites" class="md-nav__link">
    3 - Groupes de sprites
  </a>
  
    <nav class="md-nav" aria-label="3 - Groupes de sprites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creer-un-groupe-et-y-ajouter-des-sprites" class="md-nav__link">
    Créer un groupe et y ajouter des sprites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methode-update" class="md-nav__link">
    Méthode update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-autres-methodes" class="md-nav__link">
    4 - Autres méthodes
  </a>
  
    <nav class="md-nav" aria-label="4 - Autres méthodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kill-et-empty" class="md-nav__link">
    Kill et empty
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parcourir-un-groupe" class="md-nav__link">
    Parcourir un groupe
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-final" class="md-nav__link">
    Challenge Final
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C7-Techniques/" class="md-nav__link">
        C7 - Techniques et animation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C7-TextesSons/" class="md-nav__link">
        C7 - Sons et textes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C8-Sprite/" class="md-nav__link">
        C8 - Sprites et groupes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../C9-Techniques/" class="md-nav__link">
        C9 - Techniques et animation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-rappels-sur-la-poo" class="md-nav__link">
    1 - Rappels sur la POO
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-classe-sprite" class="md-nav__link">
    2 - Classe Sprite
  </a>
  
    <nav class="md-nav" aria-label="2 - Classe Sprite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    Définition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heritage-et-initialisation" class="md-nav__link">
    Héritage et initialisation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-groupes-de-sprites" class="md-nav__link">
    3 - Groupes de sprites
  </a>
  
    <nav class="md-nav" aria-label="3 - Groupes de sprites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creer-un-groupe-et-y-ajouter-des-sprites" class="md-nav__link">
    Créer un groupe et y ajouter des sprites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methode-update" class="md-nav__link">
    Méthode update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-autres-methodes" class="md-nav__link">
    4 - Autres méthodes
  </a>
  
    <nav class="md-nav" aria-label="4 - Autres méthodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kill-et-empty" class="md-nav__link">
    Kill et empty
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parcourir-un-groupe" class="md-nav__link">
    Parcourir un groupe
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-final" class="md-nav__link">
    Challenge Final
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="c6-sprites-et-groupes">C6 - Sprites et groupes</h1>
<p>Dans ce chapitre, nous apprendrons à manipuler la classe <code>Sprite</code>. Mais avant cela, des connaissances sur la programmation orientée objet avec Python sont nécessaires.</p>
<h2 id="1-rappels-sur-la-poo">1 - Rappels sur la POO</h2>
<p>La POO (Programmation Orientée Objet) consiste à programmer ses propres <em>objets</em>. Un objet est un ensemble de variables (nommées attributs) et de fonctions (nommées méthodes). Par exemple, <code>Rect</code> (un rectangle) est un objet qui possède un attribut <code>center</code> et une méthode <code>colliderect</code>. On accède aux méthodes et aux attributs d'un objet de la même façon qu'on accède au contenu d'un module : grâce à un <code>.</code>, rappelons-nous comment nous avons écrit cela auparavant :</p>
<div class="highlight"><pre><span></span><code><span class="n">voiture</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dossier_images/taxi.png&quot;</span><span class="p">)</span>
<span class="n">voiture_rect</span> <span class="o">=</span> <span class="n">voiture</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">topleft</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="c1"># méthode get_rect de voiture</span>
<span class="n">voiture_rect</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># Attribut center</span>
</code></pre></div>
<p>Jusque-là, nous avons utilisé des objets déjà programmés. Or, nous pouvons créer nos propres objets. Un objet se construit d'une manière similaire aux fonctions. Il faut d'abord <em>définir</em> l'objet grâce au mot-clé <code>class</code>. Puis on peut appeler cet objet autant de fois que l'on souhaite grâce à des parenthèses <code>()</code>. Voiçi par exemple l'objet le plus simple, l'objet vide :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Objet</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">objet_1</span> <span class="o">=</span> <span class="n">Objet</span><span class="p">()</span>
<span class="n">objet_2</span> <span class="o">=</span> <span class="n">Objet</span><span class="p">()</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Dans le langage Python, le mot clé <code>pass</code> est l'instruction qui ne fait rien. Elle sert simplement à combler le vide lorsqu'au minimum une instruction est recquise dans certaines parties du code (par exemple à l'intérier de boucles <code>for</code> et <code>while</code> ou dans les définitions de fonction)</p>
</div>
<p>Mais la définition d'un objet sera très rarement vide. Tout d'abord, dans la plupart des objets que nous programmerons, nous définirons une méthode <code>__init__</code>. Toute instruction à l'intérieur de cette méthode sera éxécutées à l'appel de l'objet. Par conséquent, quand on appelle un objet, on appelle également la méthode <code>__init__</code> associée à celui-ci. Ainsi en éxécutant le code suivant :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Objet</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">)</span>

<span class="n">objet_1</span> <span class="o">=</span> <span class="n">Objet</span><span class="p">()</span>
<span class="n">objet_2</span> <span class="o">=</span> <span class="n">Objet</span><span class="p">()</span>
</code></pre></div>
<p>On remarque que le texte "hello world" est affiché deux fois. Le paramètre <code>self</code> est un paramètre spécial et il sera <em>toujours</em> le premier paramètre d'une méthode, peu importe l'objet créé. <code>self</code> (signifiant "soi-même" en anglais) est ce qui permet de désigner l'objet en lui-même. <code>self</code> permet alors d'accéder à tous les attributs et méthodes d'un objet à l'intérieur de la définition de celui-ci, étant donné que ceux-ci appartiennent à l'objet. Nous utiliserons également <code>self</code> lorsque nous voudrons créer de nouveaux attributs. Pour illustrer nos propos, créons un objet <code>Feuille</code>, possèdant une méthode <code>plier</code> et <code>deplier</code> ainsi qu'un attribut <code>epaisseur</code> :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Feuille</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epaisseur</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">plier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">epaisseur</span> <span class="o">*=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">deplier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">epaisseur</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">epaisseur</span> <span class="o">/=</span> <span class="mi">2</span>
</code></pre></div>
<p>Lorsqu'on initialise l'objet, on commence par créer un nouvel attribut <code>epaisseur</code> identifiable par le <code>self</code> qui le précède. Dans chacune des méthodes <code>plier</code> et <code>deplier</code>, le premier paramètre est <code>self</code> puisque <code>self</code> devra <em>toujours</em> être le premier paramètre d'une méthode. Chaque méthode accède à l'attribut <code>epaisseur</code> grâce à <code>self</code> et peuvent même modifier la valeur de l'attribut ! En effet, contrairement aux variables normales, la valeur des attributs peuvent être modifiées à l'intérieur de fonctions. Dans cette fonction que nous avons programmmé plus tôt par exemple :</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">swap_values</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span><span class="n">pygame</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">Vector2</span><span class="p">):</span>
    <span class="n">vector</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">vector</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">vector</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vector</span><span class="o">.</span><span class="n">x</span>
</code></pre></div>
<p>Nous affectons clairement une nouvelle valeur aux attributs <code>x</code> et <code>y</code> de l'objet <code>vector</code>. 
De plus, chaque attribut existe individuellement. Signifiant que la valeur d'un même attribut de deux objets différents créés à partir de la même classe peut être différente d'un objet à l'autre. Afin d'illustrer cela, créons deux objets à partir de la classe <code>Feuille</code> :</p>
<div class="highlight"><pre><span></span><code><span class="n">feuille_simple</span> <span class="o">=</span> <span class="n">Feuille</span><span class="p">()</span>
<span class="n">feuille_pliee</span> <span class="o">=</span> <span class="n">Feuille</span><span class="p">()</span>
<span class="n">feuille_pliee</span><span class="o">.</span><span class="n">plier</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">feuille_simple</span><span class="o">.</span><span class="n">epaisseur</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feuille_pliee</span><span class="o">.</span><span class="n">epaisseur</span><span class="p">)</span>
</code></pre></div>
<p>Nous remarquons que bien que nous ayons modifié la valeur d'<code>epaisseur</code> de <code>feuille_pliee</code>, la valeur d'<code>epaisseur</code> de <code>feuille_simple</code> n'a pas été modifiée.</p>
<p>Enfin, notons qu'une classe peut en <em>hériter</em> une autre. C'est-à-dire que nous pouvons construire une classe à partir d'une autre. Et c'est justement cet aspect là que nous exploiterons pour programmer nos propres <em>sprites</em>.</p>
<h2 id="2-classe-sprite">2 - Classe Sprite</h2>
<h3 id="definition">Définition</h3>
<p>Avant toute chose, définissons le terme <strong>sprite</strong>. Pour la librairie Pygame, un sprite est la combinaison d'une <em>image</em> et d'un <em>rectangle</em>. Tout sprite possède une méthode <code>update</code> définissant comment le sprite se comporte et évolue. Pour Python, un sprite est ainsi tout objet qui possède un attribut <code>image</code> et <code>rect</code> ainsi qu'une méthode <code>update</code>. Un sprite appartient généralement à un <em>groupe</em> de sprites.</p>
<h3 id="heritage-et-initialisation">Héritage et initialisation</h3>
<p>On peut construire des sprites personnalisés à partir de la classe <code>pygame.sprite.Sprite</code>. Supposons que nous souhaitons créer une classe <code>Player</code> représentant le joueur et qu'il s'agisse d'un sprite. Nous devrons alors hériter la classe <code>Sprite</code> dans la classe <code>Player</code>, ce qui peut être réalisé grâce à l'instruction <code>super()</code> :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</code></pre></div>
<p>Une telle écriture appelle la méthode <code>__init__</code> de la classe passée en argument (ici <code>Sprite</code>), étant donné que <code>super()</code> représente cette dernière classe. Mais au lieu de créer un nouvel objet <code>Sprite</code>, on dit à l'ordinateur de considérer <code>Player</code> comme un objet <code>Sprite</code>. Ce qui permet à <code>Player</code> de revevoir tous les attributs de la classe héritée. <code>Player</code> reçoit ainsi un attribut <code>image</code> et <code>rect</code> ainsi qu'une méthode <code>update</code> parmi d'autres. Pour plus de personnalisation, nous pouvons redéfinir ces attributs et méthodes à nos souhaits. C'est d'ailleurs ce que nous allons généralement faire. Commencer par donner <a href="../images/player_walk.png">cette image</a> à notre sprite :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dossier_images/player_walk.png&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert_alpha</span><span class="p">()</span>
</code></pre></div>
<p>Il faut ensuite associer un rectangle à notre sprite. Pour cela, définissons son attribut <code>rect</code> :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dossier_images/player_walk.png&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert_alpha</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div>
<p>Distinguons le paramètre <code>position</code> dans la méthode <code>__init__</code>. En effet cette méthode peut prendre plusieurs arguments. Et nous devrons donner une valeur à ces arguments à chaque appel de la classe, similairement aux fonctions. En supposant qu'on souhaite créer 2 objets <code>Player</code> par exemple :</p>
<div class="highlight"><pre><span></span><code><span class="n">joueur_centre</span> <span class="o">=</span> <span class="n">Player</span><span class="p">((</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">autre_joueur</span> <span class="o">=</span> <span class="n">Player</span><span class="p">((</span><span class="mi">356</span><span class="p">,</span> <span class="mi">49</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">autre_joueur</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
</code></pre></div>
<p>Comme nous pouvons le remarquer, le tuple <code>(356, 49)</code> passé en argument définit la position du point central du rectangle de notre sprite et cela est grâce à la ligne :</p>
<div class="highlight"><pre><span></span><code><span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div>
<p>Où nous ordonnons clairement à notre rectangle de prendre la position passée en argument.</p>
<h2 id="3-groupes-de-sprites">3 - Groupes de sprites</h2>
<p>Mais comment afficher les deux sprites <code>Player</code> que nous avons créé auparavant ? Nous pouvons très bien écrire :</p>
<div class="highlight"><pre><span></span><code><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">joueur_centre</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">joueur_centre</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">autre_joueur</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">autre_joueur</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
</code></pre></div>
<p>Mais cela est long à écrire. En plus de cela, si nous n'avions pas 2 mais 34 sprites à afficher, le code deviendrait répétitif. Nous pourrions donc utiliser des listes, mais Pygame offre un outil mieux adapté : les groupes.</p>
<h3 id="creer-un-groupe-et-y-ajouter-des-sprites">Créer un groupe et y ajouter des sprites</h3>
<p>L'objet <code>Group</code> se situe dans le module sprite, ainsi pour créer un groupe <code>groupe_joueurs</code> :</p>
<div class="highlight"><pre><span></span><code><span class="n">groupe_joueurs</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
</code></pre></div>
<p>Il existe deux principales manières d'ajouter des sprites dans un groupe. Soit, on passe en argument tous les sprites à ajouter dans le groupe à l'initialisation de celui-ci comme cela :</p>
<div class="highlight"><pre><span></span><code><span class="n">joueur_centre</span> <span class="o">=</span> <span class="n">Player</span><span class="p">((</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">autre_joueur</span> <span class="o">=</span> <span class="n">Player</span><span class="p">((</span><span class="mi">356</span><span class="p">,</span> <span class="mi">49</span><span class="p">))</span>
<span class="n">groupe_joueurs</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="n">joueur_centre</span><span class="p">,</span> <span class="n">autre_joueur</span><span class="p">)</span>
</code></pre></div>
<p>Soit, on ajoute les sprites après l'initialisation du groupe grâce à la méthode <code>add</code> :</p>
<div class="highlight"><pre><span></span><code><span class="n">groupe_joueurs</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
<span class="n">joueur_centre</span> <span class="o">=</span> <span class="n">Player</span><span class="p">((</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">autre_joueur</span> <span class="o">=</span> <span class="n">Player</span><span class="p">((</span><span class="mi">356</span><span class="p">,</span> <span class="mi">49</span><span class="p">))</span>

<span class="n">groupe_joueurs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">joueur_centre</span><span class="p">,</span> <span class="n">autre_joueur</span><span class="p">)</span>
</code></pre></div>
<p>Nous pouvons afficher l'intégralité des sprites contenus dans un groupe grâce à la méthode <code>draw</code> :</p>
<div class="highlight"><pre><span></span><code><span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="c1"># Boucle évènementielle</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="c1"># On affiche toujours l&#39;arrière-plan en premier</span>
    <span class="n">groupe_joueurs</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
    <span class="c1"># Update et tick</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Attention la méthode <code>draw</code> prend un argument ! Il s'agit de la surface sur laquelle afficher les sprites. Vous l'aurez sans doute deviné, 99% du temps ce paramètre aura simplement pour valeur notre écran.</p>
</div>
<h3 id="methode-update">Méthode update</h3>
<p>Comme nous l'avons dit précédemment, chaque sprite possède une méthode <code>update</code>. Cette méthode définit le comportement du sprite, elle doit être définie dans la classe :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dossier_images/player_walk.png&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert_alpha</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vecteur</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vecteur</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vecteur</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vecteur</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vecteur</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vecteur</span><span class="o">.</span><span class="n">x</span>
</code></pre></div>
<p>Cette méthode sera appelée dans la boucle principale de notre jeu. Mais les groupes rendent cette tâche plus facile. En effet, nous pouvons appeler toutes les méthodes <code>update</code> des sprites contenus dans un groupe de sprites en une seule fois. Il suffit alors d'appeler la méthode <code>update</code> du groupe (et non pas du sprite individuellement) : </p>
<div class="highlight"><pre><span></span><code><span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="c1"># Boucle évènementielle</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="c1"># On affiche toujours l&#39;arrière-plan en premier</span>
    <span class="n">groupe_joueurs</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
    <span class="n">groupe_joueurs</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="c1"># Update et tick</span>
</code></pre></div>
<p><code>update</code> peut prendre le nombre d'arguments que vous souhaitez. Mais attention! Lorsque nous appellons la méthode <code>update</code> d'un groupe, les arguments passés à cette méthode seront également passés à chaque méthode <code>update</code> de chaque sprite dans le groupe. Il faut donc bien vérifier si les arguments coïncident bien avec chaque sprite. Voici un exemple où les arguments passés ne coïncident pas :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hp</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deplacement</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">+=</span> <span class="n">deplacement</span>

<span class="k">class</span> <span class="nc">Ennemy</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">joueur</span> <span class="o">=</span> <span class="n">Player</span><span class="p">()</span>
<span class="n">ennemi</span> <span class="o">=</span> <span class="n">Ennemy</span><span class="p">()</span>
<span class="n">groupe_sprites</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="n">joueur</span><span class="p">,</span> <span class="n">ennemi</span><span class="p">)</span>

<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="c1"># Boucle évènementielle</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">groupe_sprites</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
    <span class="n">random_vect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">groupe_sprites</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">random_vect</span><span class="p">)</span> <span class="c1"># Erreur </span>
    <span class="c1"># Tick et display.update()</span>
</code></pre></div>
<p>Dans le code çi-dessus, le méthode <code>update</code> du sprite <code>Ennemy</code> ne prend pas d'argument, alors que celle de la classe <code>Player</code> prend un argument <code>deplacement</code> ! Nous devons donc en conclure qu'un sprite <code>Player</code> ne doit pas être dans le même groupe qu'un sprite <code>Player</code>. Pour que cela fonctionne bien, nous devons créer deux groupes distingués :  </p>
<div class="highlight"><pre><span></span><code><span class="n">joueur</span> <span class="o">=</span> <span class="n">Player</span><span class="p">()</span>
<span class="n">ennemi</span> <span class="o">=</span> <span class="n">Ennemy</span><span class="p">()</span>
<span class="n">groupe_joueur</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">GroupSingle</span><span class="p">(</span><span class="n">joueur</span><span class="p">)</span>
<span class="n">groupe_ennemis</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="n">ennemi</span><span class="p">)</span>

<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="c1"># Boucle évènementielle</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">groupe_joueur</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
    <span class="n">groupe_ennemis</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
    <span class="n">random_vect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">groupe_joueur</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">random_vect</span><span class="p">)</span> 
    <span class="n">groupe_ennemis</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="c1"># Tick et display.update()</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Dans le code çi-dessus, nous sommes certains que <code>groupe_joueur</code> contiendra un seul et unique <code>sprite</code>. Pour ce genre de situation, il existe un groupe spécial : <code>GroupSingle</code>. Il fonctionne comme les groupes habituels, à l'exception qu'il ne peut contenir qu'un seul objet. </p>
</div>
<h2 id="4-autres-methodes">4 - Autres méthodes</h2>
<h3 id="kill-et-empty">Kill et empty</h3>
<p>La méthode <code>kill</code> de la classe <code>Sprite</code> supprime le sprite associé de tous les groupes dont il appartient. Ce sprite est ainsi considéré comme "mort", il n'est plus affiché par la méthode <code>draw</code> en conséquence. En reprenant l'exemple de l'accident de voiture du chapitre C5, nous pouvons simplement faire disparaitre les deux voitures grâce à la méthode <code>kill</code> au lieu de les faire exploser :</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fichier_img</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fichier_img</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">direction</span>
    <span class="k">def</span> <span class="nf">flip_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span>

<span class="n">voiture_orange</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">(</span><span class="s2">&quot;dossier_images/Car.png&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">voiture_orange</span><span class="o">.</span><span class="n">flip_image</span><span class="p">()</span>
<span class="n">taxi</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">(</span><span class="s2">&quot;dossier_images/taxi.png&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">screen_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">screen_height</span> <span class="o">-</span> <span class="mi">80</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">voitures</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="n">voiture_orange</span><span class="p">,</span> <span class="n">taxi</span><span class="p">)</span>

<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="c1"># Boucle évènementielle</span>
    <span class="n">voitures</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">voiture_orange</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">colliderect</span><span class="p">(</span><span class="n">taxi</span><span class="o">.</span><span class="n">rect</span><span class="p">):</span>
        <span class="n">voiture_orange</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
        <span class="n">taxi</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
</code></pre></div>
<p>Nous pouvons même simplifier le programme grâce à la méthode <code>empty</code> qui permet de vider tout un groupe de son contenu. Ainsi au lieu d'écrire :</p>
<div class="highlight"><pre><span></span><code><span class="n">voiture_orange</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
<span class="n">taxi</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
</code></pre></div>
<p>Nous pouvons tout à fait écrire :</p>
<div class="highlight"><pre><span></span><code><span class="n">voitures</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
</code></pre></div>
<p>Evidemment, il ne faudrait pas qu'il y ait d'autres sprites que <code>voiture_orange</code> et <code>taxi</code> dans le groupe <code>voitures</code> lorsqu'on utilise <code>empty</code>. Sinon, nous supprimerons involontairement d'autres sprites.</p>
<h3 id="parcourir-un-groupe">Parcourir un groupe</h3>
<p>Nous pouvons obtenir une représentation sous forme de liste d'un groupe grâce à la méthode <code>sprites()</code> (ou simplement l'attribut <code>sprite</code> pour <code>GroupSingle</code>). Ce qui nous permet de parcourir le contenu du groupe. En supposant par exemple qu'on souhaite programmer un jeu avec plusieurs cibles sur lequel le joueur doit tirer, nous écririons l'algorithme suivant pour détecter si le joueur a atteint une cible :</p>
<div class="highlight"><pre><span></span><code>Si le joueur clique:
    on affecte la position du curseur à la variable pos
    Pour chaque cible dans le groupe:
        Si le rectangle de la cible sélectionnée est en collision avec point pos:
            La cible disparait
</code></pre></div>
<p>Ce qui peut être traduit en Python par le code suivant (en supposant que <code>groupe_cibles</code> a déjà été défini) : </p>
<div class="highlight"><pre><span></span><code><span class="c1"># Dans la boucle évènementielle</span>
<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEBUTTONDOWN</span><span class="p">:</span>
    <span class="n">pos_curseur</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_pos</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">cible</span> <span class="ow">in</span> <span class="n">groupe_cibles</span><span class="o">.</span><span class="n">sprites</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">cible</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos_curseur</span><span class="p">):</span>
            <span class="n">cible</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
</code></pre></div>
<h2 id="challenge-final">Challenge Final</h2>
<p>En parlant d'un jeu de tir, pourquoi ne pas en programmer un ? Votre mission, si vous l'acceptez sera de programmer un jeu de tir qui ressemble à ça :</p>
<p><div class="video-container"><iframe src="../images/demo_shooter.mp4" style="position: relative; width: 100%; height: 22.172vw" frameborder="0" allowfullscreen></iframe></div></p>
<p>Ce jeu devra respecter les critères suivants :</p>
<ul>
<li>Le curseur doit être votre arme</li>
<li>Les cibles sont définies par une classe héritant de la classe <code>Sprite</code>. A vous de construire cette classe</li>
<li>Le curseur que vous contrôlez pour viser peut aussi être défini par une classe héritant de la classe <code>Sprite</code> mais cela est facultatif</li>
<li>Les cibles sont contenues dans un groupe</li>
<li>Le joueur doit pouvoir tirer et éliminer des cibles uniquement si il en touche une lors du tir</li>
<li>Il doit y avoir une part d'aléatoire dans la position et le déplacement des cibles</li>
</ul>
<p>Toutes les ressources nécessaires à la programmation du jeu çi-dessus sont téléchargeables <a href="../images/jeu_tir.zip">ici</a>. Elles proviennent du site <a href="https://opengameart.org/">opengameart.org</a>. De plus, vous avez la possibilité de télécharger le <a href="../images/source_tir.zip">code source</a> en cas de besoin.</p>
<p><img alt="pygame_logo" src="../images/pygame_logo.png" /></p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pied de page">
      
        
        <a href="../C6-Interactions/" class="md-footer__link md-footer__link--prev" aria-label="Précédent: C6 - Interactions" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Précédent
              </span>
              C6 - Interactions
            </div>
          </div>
        </a>
      
      
        
        <a href="../C7-Techniques/" class="md-footer__link md-footer__link--next" aria-label="Suivant: C7 - Techniques et animation" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Suivant
              </span>
              C7 - Techniques et animation
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.config.lang": "fr", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Rechercher", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version.title": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
        <script src="../xtra/javascripts/mathjax-config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>